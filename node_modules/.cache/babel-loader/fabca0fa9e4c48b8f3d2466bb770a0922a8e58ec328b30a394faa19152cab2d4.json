{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rsahani/Documents/RAHUL/PROJECT V-Anime/v-anime1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rsahani/Documents/RAHUL/PROJECT V-Anime/v-anime1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rsahani/Documents/RAHUL/PROJECT V-Anime/v-anime1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'../main.css';import Card from'../components/card';import _ from\"lodash\";import{jsx as _jsx}from\"react/jsx-runtime\";var ITEMS_PER_PAGE=10;function Recom(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recomList=_useState2[0],setRecomList=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),totalPages=_useState6[0],setTotalPages=_useState6[1];// console.log(recomList);\nvar fetchRecom=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(query){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.jikan.moe/v4/recommendations/anime?page=1\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;console.log(data.data);console.log(data.total_pages);setRecomList(data.data);setTotalPages(data.data.total_pages);case 10:case\"end\":return _context.stop();}},_callee);}));return function fetchRecom(_x){return _ref.apply(this,arguments);};}();function removeDuplicates(arr){return arr.filter(function(item,index){return arr.indexOf(item)===index;});}useEffect(function(){fetchRecom();},[]);var debouncedSetPage=_.debounce(setPage,500);return/*#__PURE__*/_jsx(\"div\",{onScroll:function onScroll(){var bottom=document.documentElement.scrollHeight-document.documentElement.scrollTop===document.documentElement.clientHeight;if(bottom&&page<totalPages){setPage(page+1);}},children:recomList.slice(0,page*ITEMS_PER_PAGE).map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:recomList===null||recomList===void 0?void 0:recomList.map(function(recom,index){return/*#__PURE__*/_jsx(Card,{className:'anime-card',title:recom.entry[0].title,image:recom.entry[0].images.jpg.large_image_url,description:recom.content},index);})});})});}export default Recom;","map":{"version":3,"names":["React","useState","useEffect","Card","_","ITEMS_PER_PAGE","Recom","recomList","setRecomList","page","setPage","totalPages","setTotalPages","fetchRecom","query","fetch","response","json","data","console","log","total_pages","removeDuplicates","arr","filter","item","index","indexOf","debouncedSetPage","debounce","bottom","document","documentElement","scrollHeight","scrollTop","clientHeight","slice","map","recom","entry","title","images","jpg","large_image_url","content"],"sources":["/Users/rsahani/Documents/RAHUL/PROJECT V-Anime/v-anime1/src/pages/Recom.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport '../main.css';\nimport Card from '../components/card';\nimport _ from \"lodash\";\nconst ITEMS_PER_PAGE = 10;\n\nfunction Recom() {\n  const [recomList, setRecomList] = useState([]);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n\n  // console.log(recomList);\n  const fetchRecom = async (query) => {\n    const response = await fetch(`https://api.jikan.moe/v4/recommendations/anime?page=1`);\n    const data = await response.json();\n    console.log(data.data);\n    console.log(data.total_pages);\n    setRecomList(data.data);\n    setTotalPages(data.data.total_pages);\n  };\n  \n  function removeDuplicates(arr) {\n    return arr.filter((item, \n        index) => arr.indexOf(item) === index);\n}\n  \n  useEffect(() => {\n    fetchRecom();\n  }, []);\n  const debouncedSetPage = _.debounce(setPage, 500);\n  return (\n    <div onScroll={() => {\n      const bottom =\n        document.documentElement.scrollHeight -\n        document.documentElement.scrollTop ===\n        document.documentElement.clientHeight;\n        if (bottom && page < totalPages) {\n          setPage(page + 1);\n        }\n    }}>\n      {recomList.slice(0, page * ITEMS_PER_PAGE).map((item, index) => (\n        <div className='container'>\n          {/* <Recom/> */}\n\n          {\n            recomList?.map((recom, index) => (\n              <Card className={'anime-card'} title={recom.entry[0].title} image={recom.entry[0].images.jpg.large_image_url} description={recom.content} key={index} />\n            )\n            )}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default Recom;"],"mappings":"ubAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,aAAa,CACpB,MAAOC,KAAI,KAAM,oBAAoB,CACrC,MAAOC,EAAC,KAAM,QAAQ,CAAC,2CACvB,GAAMC,eAAc,CAAG,EAAE,CAEzB,QAASC,MAAK,EAAG,CACf,cAAkCL,QAAQ,CAAC,EAAE,CAAC,wCAAvCM,SAAS,eAAEC,YAAY,eAC9B,eAAwBP,QAAQ,CAAC,CAAC,CAAC,yCAA5BQ,IAAI,eAAEC,OAAO,eACpB,eAAoCT,QAAQ,CAAC,CAAC,CAAC,yCAAxCU,UAAU,eAAEC,aAAa,eAEhC;AACA,GAAMC,WAAU,4FAAG,iBAAOC,KAAK,2JACNC,MAAK,yDAAyD,QAA/EC,QAAQ,qCACKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACVC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACA,IAAI,CAAC,CACtBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,WAAW,CAAC,CAC7Bb,YAAY,CAACU,IAAI,CAACA,IAAI,CAAC,CACvBN,aAAa,CAACM,IAAI,CAACA,IAAI,CAACG,WAAW,CAAC,CAAC,sDACtC,kBAPKR,WAAU,4CAOf,CAED,QAASS,iBAAgB,CAACC,GAAG,CAAE,CAC7B,MAAOA,IAAG,CAACC,MAAM,CAAC,SAACC,IAAI,CACnBC,KAAK,QAAKH,IAAG,CAACI,OAAO,CAACF,IAAI,CAAC,GAAKC,KAAK,GAAC,CAC9C,CAEExB,SAAS,CAAC,UAAM,CACdW,UAAU,EAAE,CACd,CAAC,CAAE,EAAE,CAAC,CACN,GAAMe,iBAAgB,CAAGxB,CAAC,CAACyB,QAAQ,CAACnB,OAAO,CAAE,GAAG,CAAC,CACjD,mBACE,YAAK,QAAQ,CAAE,mBAAM,CACnB,GAAMoB,OAAM,CACVC,QAAQ,CAACC,eAAe,CAACC,YAAY,CACrCF,QAAQ,CAACC,eAAe,CAACE,SAAS,GAClCH,QAAQ,CAACC,eAAe,CAACG,YAAY,CACrC,GAAIL,MAAM,EAAIrB,IAAI,CAAGE,UAAU,CAAE,CAC/BD,OAAO,CAACD,IAAI,CAAG,CAAC,CAAC,CACnB,CACJ,CAAE,UACCF,SAAS,CAAC6B,KAAK,CAAC,CAAC,CAAE3B,IAAI,CAAGJ,cAAc,CAAC,CAACgC,GAAG,CAAC,SAACZ,IAAI,CAAEC,KAAK,qBACzD,YAAK,SAAS,CAAC,WAAW,UAItBnB,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAE8B,GAAG,CAAC,SAACC,KAAK,CAAEZ,KAAK,qBAC1B,KAAC,IAAI,EAAC,SAAS,CAAE,YAAa,CAAC,KAAK,CAAEY,KAAK,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,KAAM,CAAC,KAAK,CAAEF,KAAK,CAACC,KAAK,CAAC,CAAC,CAAC,CAACE,MAAM,CAACC,GAAG,CAACC,eAAgB,CAAC,WAAW,CAAEL,KAAK,CAACM,OAAQ,EAAMlB,KAAK,CAAI,EACzJ,CACA,EACC,EACP,CAAC,EACE,CAEV,CAEA,cAAepB,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}